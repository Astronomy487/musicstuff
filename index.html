<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="https://rsms.me/inter/inter.css">
	<link rel="stylesheet" href="discogcss.css">
	<link rel="icon" href="favicon.png">
	<meta name="theme-color" content="#000000">
	<link rel="canonical" href="https://music.astronomy487.com">
	<meta name="description" content="Astro (f.k.a. astronomy487) is an independent electronic dance music artist with a love for synthesizers and pop music.">
	<meta name="og:description" content="Astro (f.k.a. astronomy487) is an independent electronic dance music artist with a love for synthesizers and pop music.">
	<meta name="keywords" content="electronic, dance, music, astro, artist, indie, edm">
	<meta name="author" content="Astro, astronomy487">
	<meta name="robots" content="index, follow">
	<meta property="og:site_name" content="astronomy487.com">
	<meta property="og:title" content="Astro">
	<meta property="og:image" content="squarelogo.png">
	<link rel="apple-touch-icon" href="squarelogo.png">
	<meta property="og:url" content="https://music.astronomy487.com">
	<title>Astro</title>
	<style>
		html {
			font-size: min(16px, calc(1vw));
		}
		body {
			margin: 0;
			overflow-x: hidden;
		}
		:dir(rtl) body {
			text-align: right;
		}
		main {
			margin: 0;
			width: 64rem;
			position: absolute;
			inset-inline-start: calc(50% - 32rem);
			transition: 0.5s inset-inline-start;
			pointer-events: none;
		}
		main * {
			pointer-events: all;
		}
		.inspect {
			position: fixed;
			margin: 0;
			inset-inline-start: calc(50% + 17rem);
			width: calc(50% - 17rem);
			padding-inline-start: 2rem;
			border-inline-start: solid 0.125rem var(--line);
			opacity: 0;
			display: none;
			transition: 0.2s opacity, 0.2s background;
			height: calc(100vh - 0rem);
			background: var(--bg);
			color: var(--fg);
			top: 0;
		}
		.inspect .escape a:before {
			content: "← ";
		}
		:dir(rtl) .inspect .escape a:before {
			content: "→ ";
		}
		.inspect > div {
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			animation-fill-mode: forwards;
			width: 31rem;
		}
		.inspect table {
			margin: 1rem 0;
		}
		.inspect h2 {
			line-height: 100%;
			margin: 0;
			color: var(--acc);
		}
		.inspect .parentheses {
			font-size: inherit;
		}
		.inspect[palette="true"] h2 span {
			color: inherit;
		}
		.inspect-artwork {
			width: 6rem;
			float: inline-start;
			margin-inline-end: 1rem;
		}
		.inspect td:has(.inspect-artwork) {
			width: 6rem;
		}
		@keyframes inspect-in {from {opacity: 0; transform: translateY(-50%) translateY(0.5rem);}}
		@keyframes inspect-out {to {opacity: 0; transform: translateY(-50%) translateY(0.5rem);}}
		p br {
			margin: 0.75rem 0;
		}
		table {
			margin: 0;
			border-collapse: collapse;
			border-spacing: 0;
			width: 100%;
		}
		table td {
			vertical-align: top;
			padding: 0;
			margin: 0;
		}
		.tracklist-container {
			margin: 1rem 0;
		}
		.album-tile .additional-message {
			color: var(--med);
			font-size: 0.875rem;
			line-height: 1rem;
		}
		.album-tile:first-child {
			margin-top: 3rem;
		}
		.remix-tile {
			display: inline-block;
			border-inline-start: solid 0.125rem var(--line);
			padding: 0;
			padding-inline-start: 0.5rem;
			width: 19.7rem;
			margin: 0.25rem 0.5rem;
			vertical-align: top;
		}
		.remix-tile div {
			float: inline-end;
			color: var(--med);
			margin-inline-start: 0.5rem;
		}
		.single-tile, .album-tile {
			margin: 6rem 0;
		}
		.single-tile img {
			width: 6rem;
			height: 6rem;
			display: inline-block;
		}
		.single-tile > div {
			display: inline-block;
			background: #030;
			color: var(--med);
			margin-inline-start: 0.5rem;
			vertical-align: top;
		}
		h2 {
			margin: 0;
			margin-top: 0.5rem;
			font-size: 2rem;
		}
		h4 {
			margin: 0;
			font-weight: normal;
			margin-top: 0.5rem;
			color: var(--med);
		}
		
		.lyrics {
			max-height: 10rem;
			overflow-y: scroll;
			border: solid 0.125rem var(--line);
			width: 100%;
			padding: 0.5rem;
			margin: 1.5rem 0;
		}
		.lyrics-header {
			background: var(--bg);
			display: inline-block;
			padding: 0 0.75rem;
			position: absolute;
			transform: translateY(-1.25rem);
		}
		.lyrics p {
			margin: 0;
			margin-inline-start: 1rem;
		}
		.lyrics p:first-letter {
			margin-inline-start: -1rem;
		}
		a[href] {
			color: var(--link1);
		}
		a[href]:hover {
			color: var(--link2);
		}
		a {
			cursor: pointer;
		}
		a:hover {
			text-decoration: underline;
		}
		@keyframes nav-hover {
			0% {scale: 1.25;}
		}
		nav a:hover img {
			animation: 0.2s nav-hover;
		}
		h1 {
			font-size: 2.5rem;
			font-weight: bold;
		}
		#rhombuses {
			height: 100vh;
			width: 100vw;
			position: relative;
			user-select: none;
			overflow: hidden;
			border-bottom: solid 0.125rem var(--line);
		}
		
		#other-stuff {
			margin-bottom: 16rem;
		}
		#other-stuff h2 {
			font-size: 1.5rem;
			color: var(--med);
			margin-top: 4rem;
			margin-bottom: 1rem;
		}
		.other-stuff-entry {
			display: inline-block;
			width: 8rem;
			margin-inline-end: 1rem;
			vertical-align: top;
			margin-top: 2rem;
		}
		.other-stuff-entry-image {
			width: 100%;
		}
		.other-stuff-entry .info span {
			color: var(--med);
			font-size: 0.875em;
			display: block;
			margin-top: 0.25rem;
		}
		.other-stuff-entry .info div {
			height: 5rem;
		}
		.other-stuff-entry .info nav {
		}
		header {
			position: absolute;
			top: calc(50vh);
			transform: translateY(-50%);
			width: 100%;
		}
		header h1 {
			font-size: 5rem;
			line-height: 6.5rem;
			letter-spacing: -0.03125em;
			font-weight: 900;
			text-shadow: 0.375rem 0.375rem var(--bg), 0 0 1rem var(--bg), 0 0 1.5rem var(--bg);
		}
		:dir(rtl) header h1 {
			text-shadow: -0.375rem 0.375rem var(--bg), 0 0 1rem var(--bg), 0 0 1.5rem var(--bg);
		}
		header h1 b {
			background: var(--fg);
			color: var(--bg);
			text-shadow: none;
			padding: 0 1rem;
			margin: 0 0.5rem;
			transform: rotate(-2.5deg);
			display: inline-block;
			outline: solid 0.25rem var(--bg);
			font-weight: inherit;
		}
		header h1:after {
			content: " ↓";
		}
		header ::selection {
			text-shadow: none;
		}
		header b::selection {
			background: black;
			color: white;
		}
	</style>
	<script src="talktalk/talktalk.0.3.1.min.js"></script>
</head>
<body>
	<script>
		{
			let isMobile = (a=>/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))(navigator.userAgent||navigator.vendor||window.opera);
			if (isMobile) window.location.replace("mobile");
		}
	</script>
	<div style="position: absolute;"><div id="rhombuses"></div></div>
	<main>
		<header><h1 data-talktalk="mynameis"></h1></header>
		<h1 style="margin-top: calc(100vh + 8rem);" data-talktalk="mymusic"></h1>
		<div data-talktalk="mymusiccomment"></div>
		<br><br>
		<div id="output"></div>
		<div id="other-stuff" style="margin-top: 5rem;">
			<div data-talktalk="othermusic"></div>
		</div>
	</main>
	<div class="inspect"><div></div></div>
	<script src="discog.js"></script>
	<script src="discoghelperfunctions.js"></script>
	<script>
		let events = [];
		
		function releasedStringToDate(released) {
			let releaseYear = released.substring(0, 4);
			let releaseMonth = released.substring(5, 7);
			let releaseDay = released.substring(8, 10);
			return new Date(parseInt(releaseYear), parseInt(releaseMonth)-1, parseInt(releaseDay));
		}
		
		function addSimpleEvent(song) {
			let div = document.createElement("div");
			div.setAttribute("class", "remix-tile");
			if (song.released < "2018-04-20") div.style.width = "11.125rem";
			//if (song.released < "2018-04-20") div.style.width = "14.375rem";
			div.appendChild(document.createElement("div")).innerText = Talktalk.talk(releasedStringToDate(song.released));
			let titleArea = div.appendChild(document.createElement("a"));
			setTextWithParentheses(titleArea, song);
			let event = {
				released: song.released,
				element: div
			};
			events.push(event);
			return event;
		}
		
		function addSingleEvent(song) {
			let div = document.createElement("div");
			div.setAttribute("class", "single-tile");
			
			let artwork = song.artwork;
			if (!artwork) for (let album of discog.albums) if (album.songs.includes(song)) artwork = album.artwork;
			let img = div.appendChild(document.createElement("img"));
			img.src = artwork;
			
			let info = div.appendChild(document.createElement("div"));
			let title = info.appendChild(document.createElement("div"));
			title.style.color = "var(--fg)";
			setTextWithParentheses(title, song);
			
			let event = {
				released: song.released,
				element: div
			};
			events.push(event);
			return event;
		}
		
		let inspectTransitioningRightNow = false;
		let lastInspected = undefined;
		function inspect(song) {
			if (inspectTransitioningRightNow) return;
			if (lastInspected == song) return;
			if (song && window.scrollY < document.body.getBoundingClientRect().height/2) window.scrollTo(0, document.body.getBoundingClientRect().height*2/3);
			lastInspected = song;
			document.querySelector("main").style.insetInlineStart = "calc(50% - 32rem - 17rem)";
			inspectTransitioningRightNow = true;
			let album = discog.albums.filter(x => x.songs.includes(song));
			album = album.length ? album[0] : null;
			let div = document.querySelector(".inspect > div");
			div.style.animation = "0.2s inspect-out";
			if (!song) document.querySelector(".inspect").style.opacity = "0";
			if (!song) setTimeout(function(){
				//while (document.querySelector(".inspect>div").firstChild) document.querySelector(".inspect>div").firstChild.remove();
				setTimeout(function(){
					document.querySelector(".inspect").style.display = "none";
					while (document.querySelector(".inspect > div").firstChild) document.querySelector(".inspect > div").firstChild.remove();
				}, 200);
				document.querySelector("main").style.insetInlineStart = "calc(50% - 32rem)";
				inspectTransitioningRightNow = false;
			}, 100);
			if (song) setTimeout(function(){
				document.querySelector(".inspect").style.opacity = "1";
				document.querySelector(".inspect").style.display = "block";
				div.style.animation = "0.2s inspect-in";
				setTimeout(function(){inspectTransitioningRightNow = false;}, 200);
				while (div.firstChild) div.firstChild.remove();
				
				let escape = div.appendChild(document.createElement("div"));
				let escapeA = escape.appendChild(document.createElement("a"));
				escapeA.innerText = Talktalk.talk("returntocatalogue");
				escape.setAttribute("class", "escape");
				escapeA.onclick = function(){inspect();};
				
				let tr = div.appendChild(document.createElement("table")).appendChild(document.createElement("tr"))
				
				if (song.artwork || album&&album.artwork) {
					let img = tr.appendChild(document.createElement("td")).appendChild(document.createElement("img"));
					img.src = (song.artwork || album.artwork).replace("_10", "_4");
					img.setAttribute("class", "inspect-artwork")
				}
				let td = tr.appendChild(document.createElement("td"));
				setTextWithParentheses(td.appendChild(document.createElement("h2")), song, false, false);
				
				let essentialInfoDiv = td.appendChild(document.createElement("div"));
				essentialInfoDiv.style.marginTop = "0.5rem";
				
				let essentialInfoDivFirstLine = essentialInfoDiv.appendChild(document.createElement("div"));
				let essentialInfoDivFirstLineFirstSpan = essentialInfoDivFirstLine.appendChild(document.createElement("span"));
				essentialInfoDivFirstLineFirstSpan.innerText = Talktalk.talk(releasedStringToDate(song.released || album.released));
				essentialInfoDivFirstLineFirstSpan.style.marginInlineEnd = "1rem";
				let weirdMiddleSpan = essentialInfoDivFirstLine.appendChild(document.createElement("span"));
				weirdMiddleSpan.style.userSelect = "none";
				weirdMiddleSpan.innerText = " "; //weirdMiddleSpan exists to solve number rendering issue in arabic. okay
				essentialInfoDivFirstLine.appendChild(document.createElement("span")).innerText = Talktalk.duration(song.length).talk();
				
				if (song.bonus) {
					essentialInfoDiv.appendChild(document.createElement("div")).innerText = Talktalk.talk("albummembershipbonus", {
						album: Talktalk.wrapInDirectionalMarkers(smartquotes(album.title), "ltr")
					});
				} else if (album) {
					essentialInfoDiv.appendChild(document.createElement("div")).innerText = Talktalk.talk("albummembership", {
						album: Talktalk.wrapInDirectionalMarkers(smartquotes(album.title), "ltr"),
						n: 1+album.songs.indexOf(song)
					});
				}
				
				//handle color
				let inspectStyle = document.querySelector(".inspect").style;
				let logoMode = undefined;
				if ((album && album.color) || (song.color)) {
					let bg;
					let fg;
					let acc;
					if (song.color) {
						bg = song.color.bg;
						fg = song.color.fg;
						acc = song.color.acc;
					} else if (album && album.color) {
						bg = album.color.bg;
						fg = album.color.fg;
						acc = album.color.acc;
					}
					inspectStyle.setProperty("--bg", bg);
					inspectStyle.setProperty("--fg", fg);
					inspectStyle.setProperty("--med", fg+"88");
					inspectStyle.setProperty("--line", fg+"44");
					inspectStyle.setProperty("--acc", acc);
					document.querySelector(".inspect").setAttribute("palette", "true");
					if (song.color && song.color.mode) logoMode = song.color.mode;
				} else {
					inspectStyle.setProperty("--bg", "inherit");
					inspectStyle.setProperty("--fg", "inherit");
					inspectStyle.setProperty("--med", "inherit");
					inspectStyle.setProperty("--line", "inherit");
					inspectStyle.setProperty("--acc", "inherit");
					document.querySelector(".inspect").setAttribute("palette", "false");
				}
				
				essentialInfoDiv.appendChild(navFromUrls([album?album.url:{}, song.url], logoMode));
				
				if (song.url && song.url["YouTube"]) {
					let iframe = div.appendChild(document.createElement("iframe"));
					let src = song.url["YouTube"].replace("/watch?v=", "/embed/");
					if (src.includes("&t=")) src = src.replace("&t=", "?start=");
					iframe.src = src;
					let aspectRatio = (1+Math.sqrt(5))/2;
					if ((song.released||album.released) < "2022-07-25") aspectRatio = 16/9;
					if (album && album.title == "somewhere in the milky way") aspectRatio = 1;
					if (album && album.title == "Too much!!") aspectRatio = 4/3;
					if (album && album.title == "Exosphere") aspectRatio = 2048/858;
					if (album && album.title == "Nexus Condition") aspectRatio = 2;
					if (song.title == "In a Heartbeat") aspectRatio = 2048/858;
					if (song.title == "Fractured Bliss") aspectRatio = 2048/858;
					if (song.title == "Villains") aspectRatio = 1.5;
					if (song.title == "Sad Machine (Astro Jazz Arrangement)") aspectRatio = 2;
					if (song.title == "No Fear No More (Astro Remix)") aspectRatio = 2048/858;
					if (song.title == "Stagestruck (Astro Remix)") aspectRatio = 2048/858;
					if (song.title == "ROSALIE") aspectRatio = 1;
					iframe.width = 300 * Math.sqrt(aspectRatio);
					iframe.height = 300 / Math.sqrt(aspectRatio);
					iframe.style.margin = "0";
					iframe.style.border = "none";
				}
				
				function makeInfoBox(header, content) {
					let lyricsDiv = div.appendChild(document.createElement("div"));
					lyricsDiv.setAttribute("class", "lyrics");
					let head = lyricsDiv.appendChild(document.createElement("div"));
					head.setAttribute("class", "lyrics-header");
					head.innerText = header;
					let lastParagraph;
					for (let c of content)
						if (c.length) {
							lastParagraph = lyricsDiv.appendChild(document.createElement("p"));
							lastParagraph.innerText = smartquotes(c).replace(" - ", " – ");
							lastParagraph.dir = "ltr";
						} else {
							lastParagraph.style.marginBottom = "0.75em";
						}
				}
				
				if (song.lyrics) makeInfoBox(Talktalk.talk("lyrics"), song.lyrics.split("\n"));
				if (song.samples) makeInfoBox(song.artist ? Talktalk.talk("samples") : Talktalk.talk("mixTracklist"), song.samples);
			}, 190);
		}
		
		for (let remix of discog.remixes) {
			addSimpleEvent(remix);
		}
		for (let album of discog.albums) for (let song of album.songs) if (song.released && (song.released < album.released)) {
			if (["Utopian", "Exosphere"].includes(album.title)) continue;
			if (["Chase an Idea", "Emerge"].includes(album.title)) addSimpleEvent(song);
			//else if (song.title == "ROSALIE") addSingleEvent(song);
			else addSimpleEvent(song);
		}
		
		for (let album of discog.albums) {
			let table = document.createElement("table");
			table.setAttribute("class", "album-tile");
			let tr = table.appendChild(document.createElement("tr"));
			{
				let td = tr.appendChild(document.createElement("td"));
				td.style.width = "21rem";
				let img = td.appendChild(document.createElement("img"));
				img.src = album.artwork;
				img.style.width = img.style.height = "19rem";
				let h4 = td.appendChild(document.createElement("h4"));
				h4.appendChild(document.createElement("span")).innerText = Talktalk.talk("trackcount", {n: album.songs.filter(x => !x.bonus).length});
				h4.querySelector("span").style.marginInlineEnd = "1rem";
				h4.appendChild(document.createElement("span")).innerText = Talktalk.duration(album.length).talk();
			}
			{
				let td = tr.appendChild(document.createElement("td"));
				let date = td.appendChild(document.createElement("span"));
				date.style.float = "inline-end";
				date.style.color = "var(--med)";
				date.innerText = Talktalk.talk(releasedStringToDate(album.released));
				let h2 = td.appendChild(document.createElement("h2"));
				h2.innerText = smartquotes(album.title);
				h2.dir = "ltr";
				
				let nav = td.appendChild(navFromUrls(album.url));
				nav.style.marginTop = "1rem";
				
				if (album.about) {
					let about = album.about.split("\n\n");
					for (let paragraph of about) {
						let p = td.appendChild(document.createElement("p"));
						p.innerText = smartquotes(paragraph);
						p.dir = "ltr";
					}
				}
				
				let tracklistContainer = td.appendChild(document.createElement("table"));
				tracklistContainer.setAttribute("class", "tracklist-container");
				let tracklistContainerTr = tracklistContainer.appendChild(document.createElement("tr"));
				let tracklists = [];
				let numberOfSongsToDisplay = album.songs.filter(x => !x.bonus).length;
				let numberOfColumns = {
					"Chase an Idea": 5,
					"Asymmetric Silhouette": 4,
					"Emerge": 6,
					"Pulse Width": 3,
					"Exosphere": 3,
					"Absolute Zero": 3
				}[album.title] || 2;
				for (let i = 0; i < numberOfColumns; i++) {
					tracklists[i] = tracklistContainerTr.appendChild(document.createElement("td"));
					//tracklists[i].style.width = 100/numberOfColumns + "%";
				}
				function doTracklistItem(parent, i) {
					let tracklistTr = parent.appendChild(document.createElement("tr"));
					
					let tracklistTd = tracklistTr.appendChild(document.createElement("td"));
					tracklistTd.innerText = Talktalk.talk(i+1, {"number:minimumIntegerDigits": 2});
					tracklistTd.style.paddingInlineEnd = "0.75rem";
					tracklistTd.setAttribute("class", "mono-numbers");
					tracklistTd = tracklistTr.appendChild(document.createElement("td"));
					
					let titleArea = tracklistTd.appendChild(document.createElement("a"));
					setTextWithParentheses(titleArea, album.songs[i]);
					
					tracklistTd.style.paddingInlineEnd = "1rem";
					if (album.songs[i].bonus) tracklistTr.style.color = "var(--med)";
				}
				for (let c = 0; c < numberOfColumns; c++) {
					for (let i = Math.ceil(c/numberOfColumns*numberOfSongsToDisplay); i < (c+1)/numberOfColumns*numberOfSongsToDisplay; i++) doTracklistItem(tracklists[c], i);
				}
				
				let numberOfBonusTracks = album.songs.filter(x => x.bonus).length;
				if (numberOfBonusTracks) {
					let p = td.appendChild(document.createElement("p"));
					p.setAttribute("class", "additional-message");
					
					let titles = [];
					for (let i = album.songs.length-numberOfBonusTracks; i < album.songs.length; i++) {
						titles.push(Talktalk.wrapInQuotes(
							Talktalk.wrapInDirectionalMarkers(
								formatSongTitle(album.songs[i])
							, "ltr")
						));
					}
					p.innerText = Talktalk.talk("bonustrackstatement", {n: numberOfBonusTracks, list: titles});
				}
			}
			events.push({
				released: album.released,
				element: table
			});
		}
		for (let event of events.sort((a,b)=>a.released>b.released?-1:1)) {
			output.appendChild(event.element);
		}
		
		
		let rhombusColors = ["cyan", "yellow", "magenta"];
		{
			let theDate = new Date().getMonth()+1+"-"+new Date().getDate();
			if (theDate == "3-17") rhombusColors = ["#169B62", "#FF883E", "#FFFFFF"];
			if (theDate == "3-31") rhombusColors = ["#3BBEFA", "#F589D8", "#FFFFFF"];
			if (theDate == "7-4") rhombusColors = ["#FFFFFF", "#224CE2", "#E52F29"];
			if (theDate == "10-31") rhombusColors = ["#E36622", "#666666", "#9315C1"];
			if (theDate == "12-25") rhombusColors = ["#FFFFFF", "#46903A", "#D93344"];
		}
		let allRhombuses = undefined;
		function makeRhombuses() {
			allRhombuses = [new Set(), new Set()];
			while (rhombuses.firstChild) rhombuses.firstChild.remove();
			let ww = window.innerWidth;
			let hh = window.innerHeight;
			let triWidth = 50;
			let triHeight = Math.floor(triWidth*Math.sqrt(3)/2);
			let startX = Math.floor(triWidth*(-0.5-Math.random()));
			let startY = Math.floor(triHeight*(-0.5-Math.random()));
			let oddEven = true;
			for (let x = startX; x < ww+triWidth; x += triWidth*1.5) {
				oddEven = !oddEven;
				for (let y = startY-(oddEven?0:triHeight); y < hh+triHeight; y += triHeight*2) {
					for (let [color, addX, addY, width, height, clipPath] of [
						[rhombusColors[0], 0, 0, triWidth, triHeight*2, "0% 50%, 50% 0%, 100% 50%, 50% 100%"],
						[rhombusColors[1], -triWidth, 0, triWidth*1.5, triHeight, "0% 100%, 33.3% 0%, 100% 0%, 66.7% 100%"],
						[rhombusColors[2], -triWidth, triHeight, triWidth*1.5, triHeight, "0% 0%, 33.3% 100%, 100% 100%, 66.7% 0%"]
					]) {
						let rhombus = rhombuses.appendChild(document.createElement("div"));
						rhombus.innerHTML = "&nbsp;";
						rhombus.style.background = color;
						rhombus.style.position = "absolute";
						rhombus.style.width = width + "px";
						rhombus.style.height = height + "px";
						rhombus.style.left = x+addX + "px";
						rhombus.style.top = y+addY + "px";
						rhombus.style.clipPath = "polygon("+clipPath+")";
						let state = Math.random()<0.1 ? 1 : 0;
						rhombus.style.opacity = state;
						rhombus.style.transition = "1s opacity";
						allRhombuses[state].add(rhombus);
						rhombus.onclick = function() {
							for (let i = 0; i < 2; i++) if (allRhombuses[i].has(this)) {
								rhombusSwap(i, this);
							}
						}
					}
				}
			}
			document.onscroll();
		}
		function rhombusSwap(currentState, rhombus = undefined) {
			if (!allRhombuses) return;
			let otherState = 1 - currentState;
			if (!rhombus) {
				let list = Array.from(allRhombuses[currentState]);
				if (!list.length) return;
				rhombus = list[Math.floor(Math.random()*list.length)];
			}
			rhombus.style.opacity = otherState;
			allRhombuses[currentState].delete(rhombus);
			setTimeout(function(){
				allRhombuses[otherState].add(rhombus);
			}, 1000);
		}
		setInterval(function(){
			if (window.scrollY > window.innerHeight+24) return;
			rhombusSwap(0);
			rhombusSwap(1);
		}, 200);
		
		document.onscroll = function() {
			rhombuses.style.top = 0.25*window.scrollY + "px";
			rhombuses.style.height = Math.max(20, window.innerHeight-0.25*window.scrollY) + "px";
		};
		window.onresize = makeRhombuses;
		makeRhombuses();
		
		let otherStuffDiv = document.querySelector("#other-stuff");
		for (let entry of [
			{
				title: "A Lucky Dog Christmas",
				released: "2022-12-21",
				artwork: "https://f4.bcbits.com/img/a4014819160_10.jpg"
			},
			{
				title: "LUCKY DOG WINTER TAPE 02",
				released: "2023-12-20",
				artwork: "https://f4.bcbits.com/img/a3303709017_10.jpg"
			},
			{
				title: "Now That's What I Call Gay Jazz: Volume 2",
				released: "2024-01-26",
				artwork: "https://f4.bcbits.com/img/a3582282299_10.jpg"
			},
			{
				title: "Now THAT'S What I Call Gay Jazz: Volume FOUR!!!",
				released: "2024-07-26",
				artwork: "https://f4.bcbits.com/img/a2969985701_10.jpg"
			},
			{
				title: "NTWICGJV5",
				released: "2024-11-03",
				artwork: "https://f4.bcbits.com/img/a1828470196_10.jpg"
			},
			{
				title: "NOW THAT'S WHAT I CALL GAY JAZZ: NUMBER 8",
				released: "2025-06-08",
				artwork: "https://f4.bcbits.com/img/a2021205164_10.jpg"
			},
			{
				title: "mason infinity – FLIGHT JACKET",
				released: "2021-09-10",
				artwork: "https://f4.bcbits.com/img/a2553085739_10.jpg"
			},
			{
				title: "mason infinity – Lucky Lit Me On Fire",
				released: "2024-11-22",
				artwork: "https://f4.bcbits.com/img/a0373193099_10.jpg"
			},
			{
				title: "bandanabloom – MOTHER",
				released: "2021-05-21",
				artwork: "https://f4.bcbits.com/img/a3805151777_10.jpg"
			},
			{
				title: "bandanabloom – Whatever Makes You Happy",
				released: "2022-09-21",
				artwork: "https://f4.bcbits.com/img/a3891157549_10.jpg"
			},
			{
				title: "maxredsoldier, Drew Empire – abc123",
				released: "2025-06-19",
				artwork: "https://t2.genius.com/unsafe/344x344/https%3A%2F%2Fimages.genius.com%2F05313d509918589e95e5aae3475bdad9.500x500x1.png"
			},
			{
				title: "bandanabloom – EARTHQUAKE",
				released: "2021-07-22",
				artwork: "https://t2.genius.com/unsafe/344x344/https%3A%2F%2Fimages.genius.com%2Fd5a4aa1476114e9323404864c5680b99.640x640x1.jpg"
			},
			{
				title: "bandanabloom, REY GWEN – POWER POLE (Extended)",
				released: "2021-10-01",
				artwork: "https://t2.genius.com/unsafe/344x344/https%3A%2F%2Fimages.genius.com%2Fe15d2266ac6c8aa4b0267f45f4735fef.1000x1000x1.jpg"
			},
			{
				title: "inci0 – Team",
				released: "2022-01-22",
				artwork: "https://t2.genius.com/unsafe/344x344/https%3A%2F%2Fimages.genius.com%2Fffcfa996575690a4824603116841b9b0.1000x1000x1.jpg"
			}
		].sort((a,b) => a.released < b.released ? 1 : -1)) {
			let div = otherStuffDiv.appendChild(document.createElement("div"));
			div.setAttribute("class", "other-stuff-entry");
			let img = div.appendChild(document.createElement("img"));
			img.setAttribute("class", "other-stuff-entry-image");
			img.src = entry.artwork.replace("_10", "_4");
			let info = div.appendChild(document.createElement("div"));
			info.setAttribute("class", "info");
			info.appendChild(document.createElement("span")).innerText = Talktalk.talk(releasedStringToDate(entry.released));
			let titleSpace = info.appendChild(document.createElement("div"));
			titleSpace.innerText = entry.title;
			titleSpace.dir = "ltr";
		}
	</script>
</body>
</html>